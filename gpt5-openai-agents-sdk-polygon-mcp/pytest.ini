# pytest.ini - Enhanced Configuration for Market Parser Project
# Python 3.10.12, pytest 8.4.2
# Generated: 2025-09-05

[tool:pytest]
# Test discovery configuration
testpaths = .
python_files = test_*.py *_test.py
python_classes = Test*
python_functions = test_*

# Additional test paths for comprehensive coverage
addopts = 
    -v
    --tb=short
    --strict-markers
    --strict-config
    --disable-warnings
    # Output formatting
    --color=yes
    --durations=10
    # Coverage reporting (if coverage plugin is installed)
    # --cov=src
    # --cov-report=term-missing
    # --cov-report=html:reports/coverage
    # Parallel execution (if pytest-xdist is installed)
    # -n auto

# Test markers for categorization
markers =
    api: marks tests as API tests
    integration: marks tests as integration tests
    unit: marks tests as unit tests
    slow: marks tests as slow running tests (use -m "not slow" to skip)
    security: marks tests as security validation tests
    performance: marks tests as performance tests
    smoke: marks tests as smoke tests for quick validation
    regression: marks tests as regression tests
    openai: marks tests that require OpenAI API access
    polygon: marks tests that require Polygon.io API access

# Warning filters
filterwarnings =
    ignore::DeprecationWarning
    ignore::PydanticDeprecatedSince20
    ignore::pytest.PytestUnraisableExceptionWarning
    # Ignore specific urllib3 warnings common in API testing
    ignore::urllib3.exceptions.InsecureRequestWarning

# Test timeout configuration (if pytest-timeout is installed)
timeout = 300
timeout_method = thread

# Minimum Python version requirement
minversion = 6.0

# Log configuration
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(name)s: %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

# Test file patterns to ignore
norecursedirs = 
    .git
    .tox
    .env
    .venv
    venv
    env
    node_modules
    dist
    build
    reports
    __pycache__