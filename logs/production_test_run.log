2025-08-17 11:51:42,654 - INFO - üîç Starting Production Bug Test Suite
2025-08-17 11:51:42,655 - INFO - ============================================================
2025-08-17 11:51:42,655 - INFO - üìã Test Coverage:
2025-08-17 11:51:42,656 - INFO -    ‚Ä¢ Response parsing failures (field extraction monitoring)
2025-08-17 11:51:42,656 - INFO -    ‚Ä¢ Message history corruption (None content validation)
2025-08-17 11:51:42,656 - INFO -    ‚Ä¢ FSM error recovery (complete state transition testing)
2025-08-17 11:51:42,656 - INFO -    ‚Ä¢ Integration scenarios (combined failure modes)
2025-08-17 11:51:42,657 - INFO - 
2025-08-17 11:51:42,657 - INFO - ‚ö° Executing test suite...
2025-08-17 11:51:50,862 - INFO - TEST: ================================================================================
2025-08-17 11:51:50,862 - INFO - TEST: üîç PRODUCTION BUG TEST RESULTS
2025-08-17 11:51:50,862 - INFO - TEST: ================================================================================
2025-08-17 11:51:50,862 - INFO - TEST: üìä Test Summary:
2025-08-17 11:51:50,863 - INFO - TEST:    Total tests run: 17
2025-08-17 11:51:50,863 - INFO - TEST:    Successes: 17
2025-08-17 11:51:50,863 - INFO - TEST:    Failures: 0
2025-08-17 11:51:50,863 - INFO - TEST:    Errors: 0
2025-08-17 11:51:50,863 - INFO - TEST:    Success rate: 100.0%
2025-08-17 11:51:50,863 - INFO - TEST: üéØ Critical Bug Coverage:
2025-08-17 11:51:50,864 - INFO - TEST:    ‚úÖ Response parsing failures - Field extraction monitoring
2025-08-17 11:51:50,864 - INFO - TEST:    ‚úÖ Message history corruption - None content validation
2025-08-17 11:51:50,864 - INFO - TEST:    ‚úÖ FSM error recovery - Complete state transition testing
2025-08-17 11:51:50,864 - INFO - TEST:    ‚úÖ Integration scenarios - Combined failure modes
2025-08-17 11:51:50,864 - INFO - TEST: ‚úÖ ALL PRODUCTION BUG TESTS PASSED!
2025-08-17 11:51:50,865 - INFO - TEST: üõ°Ô∏è System is ready for production deployment
2025-08-17 11:51:50,865 - WARNING - TEST_WARN: test_calculation_accuracy_in_responses (__main__.TestResponseParsingFailures.test_calculation_accuracy_in_responses)
2025-08-17 11:51:50,865 - WARNING - TEST_WARN: ok
2025-08-17 11:51:50,866 - WARNING - TEST_WARN: test_empty_response_handling (__main__.TestResponseParsingFailures.test_empty_response_handling)
2025-08-17 11:51:50,866 - WARNING - TEST_WARN: ok
2025-08-17 11:51:50,866 - WARNING - TEST_WARN: test_field_extraction_success_rate_target (__main__.TestResponseParsingFailures.test_field_extraction_success_rate_target)
2025-08-17 11:51:50,866 - WARNING - TEST_WARN: ok
2025-08-17 11:51:50,866 - WARNING - TEST_WARN: test_malformed_response_handling (__main__.TestResponseParsingFailures.test_malformed_response_handling)
2025-08-17 11:51:50,867 - WARNING - TEST_WARN: ok
2025-08-17 11:51:50,867 - WARNING - TEST_WARN: test_real_ai_response_format_variations (__main__.TestResponseParsingFailures.test_real_ai_response_format_variations)
2025-08-17 11:51:50,867 - WARNING - TEST_WARN: ok
2025-08-17 11:51:50,867 - WARNING - TEST_WARN: test_regex_pattern_resilience (__main__.TestResponseParsingFailures.test_regex_pattern_resilience)
2025-08-17 11:51:50,867 - WARNING - TEST_WARN: ok
2025-08-17 11:51:50,868 - WARNING - TEST_WARN: test_concurrent_message_integrity (__main__.TestMessageHistoryCorruption.test_concurrent_message_integrity)
2025-08-17 11:51:50,868 - WARNING - TEST_WARN: ok
2025-08-17 11:51:50,868 - WARNING - TEST_WARN: test_edge_case_content_types (__main__.TestMessageHistoryCorruption.test_edge_case_content_types)
2025-08-17 11:51:50,868 - WARNING - TEST_WARN: ok
2025-08-17 11:51:50,868 - WARNING - TEST_WARN: test_message_content_sanitization (__main__.TestMessageHistoryCorruption.test_message_content_sanitization)
2025-08-17 11:51:50,869 - WARNING - TEST_WARN: 2025-08-17 11:51:50,624 - __main__ - WARNING - Removing invalid message at index 0: Content is None
2025-08-17 11:51:50,869 - WARNING - TEST_WARN: 2025-08-17 11:51:50,625 - __main__ - WARNING - Removing invalid message at index 1: Content is empty or whitespace-only
2025-08-17 11:51:50,869 - WARNING - TEST_WARN: 2025-08-17 11:51:50,625 - __main__ - WARNING - Removing invalid message at index 2: Content is empty or whitespace-only
2025-08-17 11:51:50,869 - WARNING - TEST_WARN: ok
2025-08-17 11:51:50,870 - WARNING - TEST_WARN: test_none_content_detection (__main__.TestMessageHistoryCorruption.test_none_content_detection)
2025-08-17 11:51:50,870 - WARNING - TEST_WARN: ok
2025-08-17 11:51:50,870 - WARNING - TEST_WARN: test_pydantic_ai_integration_with_valid_messages (__main__.TestMessageHistoryCorruption.test_pydantic_ai_integration_with_valid_messages)
2025-08-17 11:51:50,870 - WARNING - TEST_WARN: ok
2025-08-17 11:51:50,870 - WARNING - TEST_WARN: test_all_error_recovery_paths (__main__.TestFSMErrorRecovery.test_all_error_recovery_paths)
2025-08-17 11:51:50,871 - WARNING - TEST_WARN: ok
2025-08-17 11:51:50,871 - WARNING - TEST_WARN: test_end_to_end_error_recovery_workflow (__main__.TestFSMErrorRecovery.test_end_to_end_error_recovery_workflow)
2025-08-17 11:51:50,871 - WARNING - TEST_WARN: 2025-08-17 11:51:50,636 - stock_fsm.e2e-ai_processing_failure - ERROR - AI processing error: AI service timeout
2025-08-17 11:51:50,871 - WARNING - TEST_WARN: 2025-08-17 11:51:50,638 - stock_fsm.e2e-parsing_failure - ERROR - Parsing error: Invalid response format
2025-08-17 11:51:50,872 - WARNING - TEST_WARN: 2025-08-17 11:51:50,639 - stock_fsm.e2e-ui_update_failure - ERROR - UI update error: UI component error
2025-08-17 11:51:50,872 - WARNING - TEST_WARN: ok
2025-08-17 11:51:50,872 - WARNING - TEST_WARN: test_error_state_isolation (__main__.TestFSMErrorRecovery.test_error_state_isolation)
2025-08-17 11:51:50,872 - WARNING - TEST_WARN: 2025-08-17 11:51:50,643 - stock_fsm.error-isolation-test - WARNING - Invalid transition: ERROR + 'prepare_prompt'
2025-08-17 11:51:50,873 - WARNING - TEST_WARN: 2025-08-17 11:51:50,643 - stock_fsm.error-isolation-test - WARNING - Invalid transition: ERROR + 'response_received'
2025-08-17 11:51:50,873 - WARNING - TEST_WARN: 2025-08-17 11:51:50,643 - stock_fsm.error-isolation-test - WARNING - Invalid transition: ERROR + 'parse_success'
2025-08-17 11:51:50,873 - WARNING - TEST_WARN: ok
2025-08-17 11:51:50,873 - WARNING - TEST_WARN: test_fsm_transition_completeness (__main__.TestFSMErrorRecovery.test_fsm_transition_completeness)
2025-08-17 11:51:50,873 - WARNING - TEST_WARN: 2025-08-17 11:51:50,647 - stock_fsm.transition-test - WARNING - Invalid transition: IDLE + 'emergency_reset'
2025-08-17 11:51:50,874 - WARNING - TEST_WARN: 2025-08-17 11:51:50,648 - stock_fsm.transition-test - ERROR - Transition action failed: Cannot prepare prompt without button_type
2025-08-17 11:51:50,874 - WARNING - TEST_WARN: 2025-08-17 11:51:50,648 - stock_fsm.transition-test - ERROR - Emergency transition to ERROR: Action error: Cannot prepare prompt without button_type
2025-08-17 11:51:50,874 - WARNING - TEST_WARN: 2025-08-17 11:51:50,648 - stock_fsm.transition-test - WARNING - Invalid transition: BUTTON_TRIGGERED + 'user_chat'
2025-08-17 11:51:50,874 - WARNING - TEST_WARN: 2025-08-17 11:51:50,648 - stock_fsm.transition-test - WARNING - Invalid transition: BUTTON_TRIGGERED + 'reset'
2025-08-17 11:51:50,874 - WARNING - TEST_WARN: 2025-08-17 11:51:50,649 - stock_fsm.transition-test - WARNING - Emergency reset triggered
2025-08-17 11:51:50,875 - WARNING - TEST_WARN: 2025-08-17 11:51:50,649 - stock_fsm.transition-test - WARNING - Invalid transition: PROMPT_PREPARING + 'error'
2025-08-17 11:51:50,875 - WARNING - TEST_WARN: 2025-08-17 11:51:50,650 - stock_fsm.transition-test - WARNING - Emergency reset triggered
2025-08-17 11:51:50,875 - WARNING - TEST_WARN: 2025-08-17 11:51:50,650 - stock_fsm.transition-test - ERROR - AI processing error: AI processing failed
2025-08-17 11:51:50,875 - WARNING - TEST_WARN: 2025-08-17 11:51:50,651 - stock_fsm.transition-test - WARNING - Emergency reset triggered
2025-08-17 11:51:50,875 - WARNING - TEST_WARN: 2025-08-17 11:51:50,651 - stock_fsm.transition-test - WARNING - Emergency reset triggered
2025-08-17 11:51:50,876 - WARNING - TEST_WARN: 2025-08-17 11:51:50,652 - stock_fsm.transition-test - WARNING - Parsing failed, using raw response as fallback
2025-08-17 11:51:50,876 - WARNING - TEST_WARN: 2025-08-17 11:51:50,653 - stock_fsm.transition-test - ERROR - Parsing error: Parsing failed
2025-08-17 11:51:50,876 - WARNING - TEST_WARN: 2025-08-17 11:51:50,653 - stock_fsm.transition-test - WARNING - Emergency reset triggered
2025-08-17 11:51:50,876 - WARNING - TEST_WARN: 2025-08-17 11:51:50,654 - stock_fsm.transition-test - ERROR - UI update error: UI update failed
2025-08-17 11:51:50,877 - WARNING - TEST_WARN: 2025-08-17 11:51:50,654 - stock_fsm.transition-test - WARNING - Emergency reset triggered
2025-08-17 11:51:50,877 - WARNING - TEST_WARN: ok
2025-08-17 11:51:50,877 - WARNING - TEST_WARN: test_combined_failure_scenario (__main__.TestProductionBugIntegration.test_combined_failure_scenario)
2025-08-17 11:51:50,877 - WARNING - TEST_WARN: 2025-08-17 11:51:50,658 - stock_fsm.combined-failure-test - ERROR - Parsing error: Parsing failed due to malformed response
2025-08-17 11:51:50,877 - WARNING - TEST_WARN: ok
2025-08-17 11:51:50,878 - WARNING - TEST_WARN: test_production_resilience_metrics (__main__.TestProductionBugIntegration.test_production_resilience_metrics)
2025-08-17 11:51:50,878 - WARNING - TEST_WARN: ok
2025-08-17 11:51:50,878 - WARNING - TEST_WARN: ----------------------------------------------------------------------
2025-08-17 11:51:50,878 - WARNING - TEST_WARN: Ran 17 tests in 0.169s
2025-08-17 11:51:50,878 - WARNING - TEST_WARN: OK
2025-08-17 11:51:50,879 - INFO - ‚è±Ô∏è  Test execution completed in 8.20 seconds
2025-08-17 11:51:50,879 - INFO - ‚úÖ ALL PRODUCTION BUG TESTS PASSED!
2025-08-17 11:51:50,879 - INFO - üõ°Ô∏è  System is validated for production deployment
2025-08-17 11:51:50,879 - INFO - 
2025-08-17 11:51:50,880 - INFO - üìä Critical Bug Prevention Status:
2025-08-17 11:51:50,880 - INFO -    ‚úÖ Response parsing failures - PROTECTED
2025-08-17 11:51:50,880 - INFO -    ‚úÖ Message history corruption - PROTECTED
2025-08-17 11:51:50,880 - INFO -    ‚úÖ FSM error recovery - PROTECTED
2025-08-17 11:51:50,880 - INFO -    ‚úÖ Integration vulnerabilities - PROTECTED
