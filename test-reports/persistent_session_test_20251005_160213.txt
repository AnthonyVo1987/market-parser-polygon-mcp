=== PERSISTENT SESSION TEST REPORT ===
Timestamp: Sun Oct  5 16:03:45 PDT 2025
Total Tests: 16
Passed: 16
Failed: 0
Success Rate: 100%
Total Session Duration: 91.308275829s
Session Mode: PERSISTENT (single session)
Session Count Detected: 1

=== RESPONSE TIME ANALYSIS ===
Min Response Time: 2.935s
Max Response Time: 12.988s
Avg Response Time: 5.83s
Performance Rating: EXCELLENT

=== TEST RESULTS DETAIL ===
Test 1: Test_1_Market_Status_Query - PASS
  Response Time: 4.089s
Test 2: Test_2_Single_Stock_Snapshot_NVDA - PASS
  Response Time: 3.206s
Test 3: Test_3_Multi_Stock_Snapshot_SPY_QQQ_IWM - PASS
  Response Time: 11.665s
Test 4: Test_4_Closing_Price_Query_SPY - PASS
  Response Time: 6.050s
Test 5: Test_5_Weekly_Performance_Analysis_SPY - PASS
  Response Time: 5.237s
Test 6: Test_6_Support_Resistance_SPY - PASS
  Response Time: 3.382s
Test 7: Test_7_Technical_Analysis_SPY - PASS
  Response Time: 6.645s
Test 8: Test_8_SMA_Indicator_SPY - PASS
  Response Time: 2.935s
Test 9: Test_9_EMA_Indicator_NVDA - PASS
  Response Time: 4.539s
Test 10: Test_10_RSI_Indicator_SPY - PASS
  Response Time: 5.217s
Test 11: Test_11_MACD_Indicator_AAPL - PASS
  Response Time: 4.614s
Test 12: Test_12_Multi_Ticker_Quote_AAPL_MSFT_GOOGL - PASS
  Response Time: 12.988s
Test 13: Test_13_Options_Quote_SPY_Call - PASS
  Response Time: 7.060s
Test 14: Test_14_OHLC_Custom_Date_Range_AAPL - PASS
  Response Time: 6.558s
Test 15: Test_15_OHLC_Specific_Date_TSLA - PASS
  Response Time: 4.607s
Test 16: Test_16_OHLC_Previous_Close_SPY - PASS
  Response Time: 4.571s

=== FULL CLI OUTPUT ===
Welcome to the GPT-5 powered Market Analysis Agent. Type 'exit' to quit.
📊 CLI session 'cli_session' initialized for conversation memory
> 
✅ Query processed successfully!
Agent Response:


 • Market status: Closed                                                        
 • After-hours: No                                                              
 • Exchanges: Nasdaq - closed, NYSE - closed, OTC - closed                      
 • Server time: 2025-10-05 19:02:16 (ET)                                        
 • Date: 2025-10-05                                                             
 • Source: Polygon.io                                                           

Tools Used:                                                                     

 • get_market_status_and_date_time() - Provided real-time market status and     
   server datetime for current market state.                                    

📊 Performance Metrics:
   ⏱️  Response Time: 4.089s
   🔢  Tokens Used: 10,907 (Input: 10,663, Output: 244)
   🤖  Model: gpt-5-nano

──────────────────────────────────────────────────

> 
✅ Query processed successfully!
Agent Response:


 • NVDA: $187.62                                                                
 • Change: -$1.27 (-0.67%)                                                      
 • High: $190.36                                                                
 • Low: $185.38                                                                 
 • Open: $189.19                                                                
 • Previous close: $188.89                                                      

Tools Used:                                                                     

 • get_stock_quote(ticker='NVDA') - Single ticker request, used Finnhub         
   real-time quote data as per RULE #1                                          

📊 Performance Metrics:
   ⏱️  Response Time: 3.206s
   🔢  Tokens Used: 11,285 (Input: 11,110, Output: 175)
   🤖  Model: gpt-5-nano

──────────────────────────────────────────────────

> 
✅ Query processed successfully!
Agent Response:


 • SPY: $669.21 (Change -0.01, -0.00%), High 672.67, Low 668.16, Open 669.99,   
   Previous close 669.22                                                        
 • QQQ: $603.18 (Change -2.55, -0.42%), High 607.33, Low 601.38, Open 606.51,   
   Previous close 605.73                                                        
 • IWM: $245.83 (Change +1.81, +0.74%), High 248.09, Low 245.03, Open 245.35,   
   Previous close 244.02                                                        

Tools Used:                                                                     

 • get_stock_quote_multi(tickers=['SPY','QQQ','IWM'], market_type='stocks') -   
   Attempted multi-ticker snapshot, used for efficiency per RULE #2             
 • get_stock_quote(ticker='SPY') - Fallback single-ticker quote due to data     
   unavailability in multi-ticker response                                      
 • get_stock_quote(ticker='QQQ') - Fallback single-ticker quote due to data     
   unavailability in multi-ticker response                                      
 • get_stock_quote(ticker='IWM') - Fallback single-ticker quote due to data     
   unavailability in multi-ticker response                                      

Notes:                                                                          

 • Data shown is from Finnhub real-time quotes. If you want more detail (e.g.,  
   after-hours, volume), I can add it.                                          

📊 Performance Metrics:
   ⏱️  Response Time: 11.665s
   🔢  Tokens Used: 32,067 (Input: 31,545, Output: 522)
   🤖  Model: gpt-5-nano

──────────────────────────────────────────────────

> 
✅ Query processed successfully!
Agent Response:


 • SPY today closing price: 669.21                                              

Tools Used:                                                                     

 • get_OHLC_bars_previous_close(ticker='SPY', adjusted=True) - Fallback since   
   market was closed today; provides last completed close data.                 

📊 Performance Metrics:
   ⏱️  Response Time: 6.050s
   🔢  Tokens Used: 14,071 (Input: 13,859, Output: 212)
   🤖  Model: gpt-5-nano

──────────────────────────────────────────────────

> 
✅ Query processed successfully!
Agent Response:


 • SPY weekly price change: $7.39                                               
 • Weekly percent change: 1.12%                                                 

Tools Used:                                                                     

 • get_OHLC_bars_custom_date_range(ticker='SPY', from_date='2025-09-01',        
   to_date='2025-10-05', timespan='week', multiplier=1) - Used to fetch weekly  
   bars and compute weekly change.                                              

📊 Performance Metrics:
   ⏱️  Response Time: 5.237s
   🔢  Tokens Used: 15,380 (Input: 14,783, Output: 597)
   🤖  Model: gpt-5-nano

──────────────────────────────────────────────────

> 
✅ Query processed successfully!
Agent Response:


 • SPY support levels:                                                          
    • 654.00 (near recent strong low)                                           
    • 647.00 – 648.00 (rounded prior swing low zone)                            
 • SPY resistance levels:                                                       
    • 672.68 (weekly high)                                                      
    • 667.00 – 668.00 (near recent swing high area)                             

Notes:                                                                          

 • Levels based on recent weekly highs/lows. May adjust with intraday action.   

Tools Used:                                                                     

 • none used for this request.                                                  

📊 Performance Metrics:
   ⏱️  Response Time: 3.382s
   🔢  Tokens Used: 8,157 (Input: 7,604, Output: 553)
   🤖  Model: gpt-5-nano

──────────────────────────────────────────────────

> 
✅ Query processed successfully!
Agent Response:


 • SPY 50-day SMA: 648.03                                                       
 • SPY 50-day EMA: 648.04                                                       
 • SPY 14-day RSI: 69.00 (near overbought)                                      
 • SPY MACD: MACD 6.05, Signal 6.00, Histogram 0.06                             

Tools Used:                                                                     

 • get_ta_sma(ticker='SPY', timespan='day', window=50, limit=10) - SMA values   
   for trend context                                                            
 • get_ta_ema(ticker='SPY', timespan='day', window=50, limit=10) - EMA values   
   for trend context                                                            
 • get_ta_rsi(ticker='SPY', timespan='day', window=14, limit=10) - RSI momentum 
 • get_ta_macd(ticker='SPY', timespan='day', short_window=12, long_window=26,   
   signal_window=9, limit=10) - MACD signals                                    

📊 Performance Metrics:
   ⏱️  Response Time: 6.645s
   🔢  Tokens Used: 11,988 (Input: 11,363, Output: 625)
   🤖  Model: gpt-5-nano

──────────────────────────────────────────────────

> 
✅ Query processed successfully!
Agent Response:


 • 50-day SMA for SPY: 648.03                                                   

Tools Used:                                                                     

 • get_ta_sma(ticker='SPY', timespan='day', window=50, limit=10) - Provided     
   50-day SMA values; summary shows latest at 648.03.                           

📊 Performance Metrics:
   ⏱️  Response Time: 2.935s
   🔢  Tokens Used: 19,453 (Input: 19,355, Output: 98)
   🤖  Model: gpt-5-nano

──────────────────────────────────────────────────

> 
✅ Query processed successfully!
Agent Response:


 • NVDA 20-day EMA: 180.54                                                      

Tools Used:                                                                     

 • get_ta_ema(ticker='NVDA', timespan='day', window=20, limit=10) - Provided    
   20-day EMA value for NVDA.                                                   

📊 Performance Metrics:
   ⏱️  Response Time: 4.539s
   🔢  Tokens Used: 20,359 (Input: 20,202, Output: 157)
   🤖  Model: gpt-5-nano

──────────────────────────────────────────────────

> 
✅ Query processed successfully!
Agent Response:


 • SPY 14-day RSI: 69.00 (near overbought)                                      

Tools Used:                                                                     

 • get_ta_rsi(ticker='SPY', timespan='day', window=14, limit=10) - Provided RSI 
   values; latest near 69.0 indicating near overbought conditions.              

📊 Performance Metrics:
   ⏱️  Response Time: 5.217s
   🔢  Tokens Used: 21,103 (Input: 20,998, Output: 105)
   🤖  Model: gpt-5-nano

──────────────────────────────────────────────────

> 
✅ Query processed successfully!
Agent Response:


 • AAPL MACD:  MACD 7.41, Signal 6.97, Histogram 0.44                           

Tools Used:                                                                     

 • get_ta_macd(ticker='AAPL', timespan='day', short_window=12, long_window=26,  
   signal_window=9, limit=10) - Provided MACD values and components.            

📊 Performance Metrics:
   ⏱️  Response Time: 4.614s
   🔢  Tokens Used: 22,231 (Input: 22,106, Output: 125)
   🤖  Model: gpt-5-nano

──────────────────────────────────────────────────

> 
✅ Query processed successfully!
Agent Response:


 • AAPL: $258.02 ( +$0.89, +0.35% ), High 259.24, Low 253.95, Open 254.66, Prev 
   close 257.13                                                                 
 • MSFT: $517.35 ( +$1.61, +0.31% ), High 520.49, Low 515.00, Open 517.10, Prev 
   close 515.74                                                                 
 • GOOGL: $245.35 ( -$0.34, -0.14% ), High 246.30, Low 241.66, Open 244.49, Prev
   close 245.69                                                                 

Tools Used:                                                                     

 • get_stock_quote_multi(tickers=['AAPL','MSFT','GOOGL'], market_type='stocks') 
   - Initial attempt for efficiency; data unavailable, so used individual symbol
   quotes                                                                       
 • get_stock_quote(ticker='AAPL') - Single ticker quote for AAPL                
 • get_stock_quote(ticker='MSFT') - Single ticker quote for MSFT                
 • get_stock_quote(ticker='GOOGL') - Single ticker quote for GOOGL              

📊 Performance Metrics:
   ⏱️  Response Time: 12.988s
   🔢  Tokens Used: 60,766 (Input: 60,299, Output: 467)
   🤖  Model: gpt-5-nano

──────────────────────────────────────────────────

> 
✅ Query processed successfully!
Agent Response:


 • SPY 251219C00650000 (December 251219 call)                                   
    • Last price (close): 34.90                                                 
    • Day range: 34.60 - 37.67                                                  
    • Implied vol: 18.11%                                                       
    • Delta: 0.679                                                              
    • Theta: -0.165                                                             
    • Gamma: 0.00663                                                            
    • Vega: 1.143                                                               
    • Open interest: 21,568                                                     

Tools Used:                                                                     

 • get_options_quote_single(underlying_asset='SPY',                             
   option_contract='O:SPY251219C00650000') - Requested specific options contract
   quote; returns Greeks, IV, and OI from Polygon.io.                           

📊 Performance Metrics:
   ⏱️  Response Time: 7.060s
   🔢  Tokens Used: 25,483 (Input: 25,289, Output: 194)
   🤖  Model: gpt-5-nano

──────────────────────────────────────────────────

> 
✅ Query processed successfully!
Agent Response:


 • Data: AAPL daily bars from 2024-01-01 to 2024-03-31 (61 bars returned)       
 • Start close: 185.64                                                          
 • End close: 171.48                                                            
 • Net change: -14.16                                                           
 • Time span: Jan 1, 2024 to Mar 31, 2024                                       

Notes:                                                                          

 • Full daily bars data (open, high, low, close, volume) are included in the    
   retrieved dataset. If you want this as a CSV or a summarized table, tell me  
   the format and I’ll export.                                                  

Tools Used:                                                                     

 • get_OHLC_bars_custom_date_range(ticker='AAPL', from_date='2024-01-01',       
   to_date='2024-03-31', timespan='day', multiplier=1, limit=5000) - Retrieved  
   daily OHLC data for the requested date range.                                

📊 Performance Metrics:
   ⏱️  Response Time: 6.558s
   🔢  Tokens Used: 30,979 (Input: 30,276, Output: 703)
   🤖  Model: gpt-5-nano

──────────────────────────────────────────────────

> 
✅ Query processed successfully!
Agent Response:


 • TSLA price on 2024-12-13: Close 436.23                                       
 • Open 420.00, High 436.30, Low 415.71                                         
 • Volume 88,937,833                                                            

Tools Used:                                                                     

 • get_OHLC_bars_specific_date(ticker='TSLA', date='2024-12-13', adjusted=True) 
   - Retrieved exact daily OHLC data for TSLA on the specified date.            

📊 Performance Metrics:
   ⏱️  Response Time: 4.607s
   🔢  Tokens Used: 35,390 (Input: 35,189, Output: 201)
   🤖  Model: gpt-5-nano

──────────────────────────────────────────────────

> 
✅ Query processed successfully!
Agent Response:


 • SPY previous close: 669.21                                                   

Tools Used:                                                                     

 • get_OHLC_bars_previous_close(ticker='SPY', adjusted=True) - Provided last    
   completed close for SPY.                                                     

📊 Performance Metrics:
   ⏱️  Response Time: 4.571s
   🔢  Tokens Used: 35,872 (Input: 35,731, Output: 141)
   🤖  Model: gpt-5-nano

──────────────────────────────────────────────────

> Goodbye!
📊 CLI session cleaned up

=== END PERSISTENT SESSION TEST REPORT ===
