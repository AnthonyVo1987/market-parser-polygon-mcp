=== PERSISTENT SESSION TEST REPORT ===
Timestamp: Sun Oct  5 16:35:11 PDT 2025
Total Tests: 16
Passed: 16
Failed: 0
Success Rate: 100%
Total Session Duration: 109.352034274s
Session Mode: PERSISTENT (single session)
Session Count Detected: 1

=== RESPONSE TIME ANALYSIS ===
Min Response Time: 3.680s
Max Response Time: 16.613s
Avg Response Time: 7.05s
Performance Rating: EXCELLENT

=== TEST RESULTS DETAIL ===
Test 1: Test_1_Market_Status_Query - PASS
  Response Time: 6.132s
Test 2: Test_2_Single_Stock_Snapshot_NVDA - PASS
  Response Time: 7.112s
Test 3: Test_3_Multi_Stock_Snapshot_SPY_QQQ_IWM - PASS
  Response Time: 9.212s
Test 4: Test_4_Closing_Price_Query_SPY - PASS
  Response Time: 5.551s
Test 5: Test_5_Weekly_Performance_Analysis_SPY - PASS
  Response Time: 8.824s
Test 6: Test_6_Support_Resistance_SPY - PASS
  Response Time: 3.680s
Test 7: Test_7_Technical_Analysis_SPY - PASS
  Response Time: 7.147s
Test 8: Test_8_SMA_Indicator_SPY - PASS
  Response Time: 4.406s
Test 9: Test_9_EMA_Indicator_NVDA - PASS
  Response Time: 3.821s
Test 10: Test_10_RSI_Indicator_SPY - PASS
  Response Time: 7.059s
Test 11: Test_11_MACD_Indicator_AAPL - PASS
  Response Time: 7.440s
Test 12: Test_12_Multi_Ticker_Quote_AAPL_MSFT_GOOGL - PASS
  Response Time: 16.613s
Test 13: Test_13_Options_Quote_SPY_Call - PASS
  Response Time: 7.559s
Test 14: Test_14_OHLC_Custom_Date_Range_AAPL - PASS
  Response Time: 7.208s
Test 15: Test_15_OHLC_Specific_Date_TSLA - PASS
  Response Time: 5.838s
Test 16: Test_16_OHLC_Previous_Close_SPY - PASS
  Response Time: 5.232s

=== FULL CLI OUTPUT ===
Welcome to the GPT-5 powered Market Analysis Agent. Type 'exit' to quit.
📊 CLI session 'cli_session' initialized for conversation memory
> 
✅ Query processed successfully!
Agent Response:


 • Market status: Closed                                                        
 • Server time: 2025-10-05 19:33:23 (ET)                                        
 • Exchanges: Nasdaq: closed, NYSE: closed, OTC: closed                         

Tools Used:                                                                     

 • get_market_status_and_date_time() - Provided real-time market status and     
   server datetime from Polygon.io.                                             

📊 Performance Metrics:
   ⏱️  Response Time: 6.132s
   🔢  Tokens Used: 10,941 (Input: 10,721, Output: 220)
   🤖  Model: gpt-5-nano

──────────────────────────────────────────────────

> 
✅ Query processed successfully!
Agent Response:


 • NVDA: $187.62                                                                
 • Change: -1.27 (-0.67%)                                                       
 • High: $190.36                                                                
 • Low: $185.38                                                                 
 • Open: $189.19                                                                
 • Previous close: $188.89                                                      

Tools Used:                                                                     

 • get_stock_quote(ticker='NVDA') - Single ticker request, used for real-time   
   quote data via Finnhub.                                                      

📊 Performance Metrics:
   ⏱️  Response Time: 7.112s
   🔢  Tokens Used: 11,138 (Input: 11,030, Output: 108)
   🤖  Model: gpt-5-nano

──────────────────────────────────────────────────

> 
✅ Query processed successfully!
Agent Response:


 • SPY: $669.21 (▲ 0.00%)                                                       
 • QQQ: $603.18 ▼ 2.55 (-0.42%)                                                 
 • IWM: $245.83 ▲ 1.81 (0.74%)                                                  

Notes:                                                                          

 • SPY: High 672.67, Low 668.16, Open 669.99, Prev Close 669.22                 
 • QQQ: High 607.33, Low 601.38, Open 606.51, Prev Close 605.73                 
 • IWM: High 248.09, Low 245.03, Open 245.35, Prev Close 244.02                 

Tools Used:                                                                     

 • get_stock_quote_multi(tickers=['SPY','QQQ','IWM'], market_type='stocks') -   
   Attempted to fetch in parallel for multiple tickers; data returned           
   incomplete, fallback to individual quotes.                                   
 • get_stock_quote(ticker='SPY') - Fallback single-ticker quote after           
   multi-ticker data was incomplete                                             
 • get_stock_quote(ticker='QQQ') - Fallback single-ticker quote after           
   multi-ticker data was incomplete                                             
 • get_stock_quote(ticker='IWM') - Fallback single-ticker quote after           
   multi-ticker data was incomplete                                             

📊 Performance Metrics:
   ⏱️  Response Time: 9.212s
   🔢  Tokens Used: 31,746 (Input: 31,319, Output: 427)
   🤖  Model: gpt-5-nano

──────────────────────────────────────────────────

> 
✅ Query processed successfully!
Agent Response:


 • SPY closing price today (last trade): 669.21                                 
 • Change: -0.01 (-0.00%)                                                       
 • High: 672.67                                                                 
 • Low: 668.16                                                                  
 • Open: 669.99                                                                 
 • Previous close: 669.22                                                       

Notes: Market is closed; data reflects last traded price today.                 

Tools Used:                                                                     

 • get_stock_quote(ticker='SPY') - Single ticker request, used for real-time    
   quote data via Finnhub.                                                      

📊 Performance Metrics:
   ⏱️  Response Time: 5.551s
   🔢  Tokens Used: 14,457 (Input: 13,944, Output: 513)
   🤖  Model: gpt-5-nano

──────────────────────────────────────────────────

> 
✅ Query processed successfully!
Agent Response:


 • SPY weekly price change: $0.00 (0.00%)                                       

Notes: Last available weekly close data shows this week's close at 669.21;      
prior-week close not clearly available in this fetch. If you want, I can pull   
the exact previous Friday close for precise week-over-week calculation.         

Tools Used:                                                                     

 • get_OHLC_bars_custom_date_range(ticker='SPY', from_date='2025-09-28',        
   to_date='2025-10-05', timespan='week', multiplier=1) - Fetch weekly bar to   
   compare current close vs prior week.                                         
 • get_OHLC_bars_previous_close(ticker='SPY', adjusted=True) - Fallback for last
   close when needed.                                                           

📊 Performance Metrics:
   ⏱️  Response Time: 8.824s
   🔢  Tokens Used: 23,443 (Input: 22,362, Output: 1,081)
   🤖  Model: gpt-5-nano

──────────────────────────────────────────────────

> 
✅ Query processed successfully!
Agent Response:


 • SPY support: 661.61, 664.00                                                  
 • SPY resistance: 672.68, 675.00                                               
 • Current close: 669.21                                                        

Notes: based on weekly range this week (high 672.68, low 661.61) and last close 
669.21.                                                                         

Tools Used:                                                                     

 • none                                                                         

📊 Performance Metrics:
   ⏱️  Response Time: 3.680s
   🔢  Tokens Used: 7,893 (Input: 7,494, Output: 399)
   🤖  Model: gpt-5-nano

──────────────────────────────────────────────────

> 
✅ Query processed successfully!
Agent Response:


 • SPY 50-day SMA: 648.03                                                       
 • SPY 50-day EMA: 648.04                                                       
 • SPY 14-day RSI: 69.00 (near overbought)                                      
 • SPY MACD (12/26/9): 6.05 (line above signal at 5.99; histogram 0.06)         

Notes:                                                                          

 • Price today: 669.21 (close)                                                  
 • Indicators reflect daily values; latest timestamp around last close.         

Tools Used:                                                                     

 • get_ta_sma(ticker='SPY', timespan='day', window=50, limit=10) - Calculated   
   50-day simple moving average.                                                
 • get_ta_ema(ticker='SPY', timespan='day', window=50, limit=10) - Calculated   
   50-day exponential moving average.                                           
 • get_ta_rsi(ticker='SPY', timespan='day', window=14, limit=10) - Calculated   
   14-day RSI.                                                                  
 • get_ta_macd(ticker='SPY', timespan='day', short_window=12, long_window=26,   
   signal_window=9, limit=10) - Calculated MACD and signal line.                

📊 Performance Metrics:
   ⏱️  Response Time: 7.147s
   🔢  Tokens Used: 11,779 (Input: 11,240, Output: 539)
   🤖  Model: gpt-5-nano

──────────────────────────────────────────────────

> 
✅ Query processed successfully!
Agent Response:


 • SPY 50-day SMA: 648.03                                                       

Tools Used:                                                                     

 • get_ta_sma(ticker='SPY', timespan='day', window=50, limit=10) - Requested    
   50-day SMA for SPY.                                                          

📊 Performance Metrics:
   ⏱️  Response Time: 4.406s
   🔢  Tokens Used: 19,401 (Input: 19,245, Output: 156)
   🤖  Model: gpt-5-nano

──────────────────────────────────────────────────

> 
✅ Query processed successfully!
Agent Response:


 • NVDA 20-day EMA: 180.54                                                      

Tools Used:                                                                     

 • get_ta_ema(ticker='NVDA', timespan='day', window=20, limit=10) - Requested   
   20-day EMA for NVDA.                                                         

📊 Performance Metrics:
   ⏱️  Response Time: 3.821s
   🔢  Tokens Used: 20,080 (Input: 19,988, Output: 92)
   🤖  Model: gpt-5-nano

──────────────────────────────────────────────────

> 
✅ Query processed successfully!
Agent Response:


 • SPY 14-day RSI: 69.00 (near overbought)                                      

Tools Used:                                                                     

 • get_ta_rsi(ticker='SPY', timespan='day', window=14, limit=10) - Requested    
   14-day RSI for SPY.                                                          

📊 Performance Metrics:
   ⏱️  Response Time: 7.059s
   🔢  Tokens Used: 20,825 (Input: 20,730, Output: 95)
   🤖  Model: gpt-5-nano

──────────────────────────────────────────────────

> 
✅ Query processed successfully!
Agent Response:


 • AAPL MACD: 7.41                                                              
 • Signal: 6.97                                                                 
 • Histogram: 0.44                                                              

Notes: Latest values reflect daily MACD calculation.                            

Tools Used:                                                                     

 • get_ta_macd(ticker='AAPL', timespan='day', short_window=12, long_window=26,  
   signal_window=9, limit=10) - Requested MACD values for AAPL.                 

📊 Performance Metrics:
   ⏱️  Response Time: 7.440s
   🔢  Tokens Used: 22,118 (Input: 21,917, Output: 201)
   🤖  Model: gpt-5-nano

──────────────────────────────────────────────────

> 
✅ Query processed successfully!
Agent Response:


 • AAPL: $258.02 ▲ 0.89 (0.35%)                                                 
 • MSFT: $517.35 ▲ 1.61 (0.31%)                                                 
 • GOOGL: $245.35 ▼ 0.34 (-0.14%)                                               

Notes:                                                                          

 • AAPL: High 259.24, Low 253.95, Open 254.66, Prev Close 257.13                
 • MSFT: High 520.49, Low 515.00, Open 517.10, Prev Close 515.74                
 • GOOGL: High 246.30, Low 241.66, Open 244.49, Prev Close 245.69               

Tools Used:                                                                     

 • get_stock_quote_multi(tickers=['AAPL','MSFT','GOOGL'], market_type='stocks') 
   - Initial attempt for parallel quotes; data returned incomplete, fallback to 
   individual quotes.                                                           
 • get_stock_quote(ticker='AAPL') - Single-ticker quote for AAPL                
 • get_stock_quote(ticker='MSFT') - Single-ticker quote for MSFT                
 • get_stock_quote(ticker='GOOGL') - Single-ticker quote for GOOGL              

📊 Performance Metrics:
   ⏱️  Response Time: 16.613s
   🔢  Tokens Used: 60,203 (Input: 59,726, Output: 477)
   🤖  Model: gpt-5-nano

──────────────────────────────────────────────────

> 
✅ Query processed successfully!
Agent Response:


 • SPY December 650 Call (O:SPY251219C00650000)                                 
    • Last price (time not provided): 34.90                                     
    • Day range: 34.60 - 37.67                                                  
    • Implied Volatility: 18.11%                                                
    • Delta: 0.679                                                              
    • Gamma: 0.0066                                                             
    • Theta: -0.165                                                             
    • Vega: 1.143                                                               
    • Open Interest: 21,568                                                     
    • Break-even: not provided                                                  

Notes: Data from Polygon.io; update timestamp shows as provided by the feed.    

Tools Used:                                                                     

 • get_options_quote_single(underlying_asset='SPY',                             
   option_contract='O:SPY251219C00650000') - Retrieved options contract details 
   and Greeks.                                                                  

📊 Performance Metrics:
   ⏱️  Response Time: 7.559s
   🔢  Tokens Used: 25,326 (Input: 25,114, Output: 212)
   🤖  Model: gpt-5-nano

──────────────────────────────────────────────────

> 
✅ Query processed successfully!
Agent Response:


 • AAPL daily bars (2024-01-01 to 2024-03-31)                                   
    • Bars: 61                                                                  
    • First close: 185.64                                                       
    • Last close: 171.48                                                        
    • Note: Data covers all trading days in the period; Jan 1 is a holiday, so  
      dates span business days within range.                                    

Tools Used:                                                                     

 • get_OHLC_bars_custom_date_range(ticker='AAPL', from_date='2024-01-01',       
   to_date='2024-03-31', timespan='day', multiplier=1) - Retrieved daily OHLC   
   bars for the specified date range.                                           

📊 Performance Metrics:
   ⏱️  Response Time: 7.208s
   🔢  Tokens Used: 30,967 (Input: 30,314, Output: 653)
   🤖  Model: gpt-5-nano

──────────────────────────────────────────────────

> 
✅ Query processed successfully!
Agent Response:


 • TSLA price on 2024-12-13: Close 436.23                                       
 • Open 420.00, High 436.30, Low 415.71                                         
 • Adjusted: Yes                                                                

Tools Used:                                                                     

 • get_OHLC_bars_specific_date(ticker='TSLA', date='2024-12-13', adjusted=True) 
   - Retrieved daily OHLC for the specific date.                                

📊 Performance Metrics:
   ⏱️  Response Time: 5.838s
   🔢  Tokens Used: 35,137 (Input: 34,944, Output: 193)
   🤖  Model: gpt-5-nano

──────────────────────────────────────────────────

> 
✅ Query processed successfully!
Agent Response:


 • SPY previous trading day close: 669.21                                       

Notes: Adjusted data; market may be closed.                                     

Tools Used:                                                                     

 • get_OHLC_bars_previous_close(ticker='SPY', adjusted=True) - Retrieved last   
   completed trading day's close.                                               

📊 Performance Metrics:
   ⏱️  Response Time: 5.232s
   🔢  Tokens Used: 35,523 (Input: 35,434, Output: 89)
   🤖  Model: gpt-5-nano

──────────────────────────────────────────────────

> Goodbye!
📊 CLI session cleaned up

=== END PERSISTENT SESSION TEST REPORT ===
