=== PERSISTENT SESSION TEST REPORT ===
Timestamp: Sun Oct  5 16:38:40 PDT 2025
Total Tests: 16
Passed: 16
Failed: 0
Success Rate: 100%
Total Session Duration: 118.929497227s
Session Mode: PERSISTENT (single session)
Session Count Detected: 1

=== RESPONSE TIME ANALYSIS ===
Min Response Time: 2.988s
Max Response Time: 17.219s
Avg Response Time: 7.57s
Performance Rating: EXCELLENT

=== TEST RESULTS DETAIL ===
Test 1: Test_1_Market_Status_Query - PASS
  Response Time: 5.300s
Test 2: Test_2_Single_Stock_Snapshot_NVDA - PASS
  Response Time: 2.988s
Test 3: Test_3_Multi_Stock_Snapshot_SPY_QQQ_IWM - PASS
  Response Time: 9.260s
Test 4: Test_4_Closing_Price_Query_SPY - PASS
  Response Time: 4.052s
Test 5: Test_5_Weekly_Performance_Analysis_SPY - PASS
  Response Time: 6.880s
Test 6: Test_6_Support_Resistance_SPY - PASS
  Response Time: 9.910s
Test 7: Test_7_Technical_Analysis_SPY - PASS
  Response Time: 8.326s
Test 8: Test_8_SMA_Indicator_SPY - PASS
  Response Time: 17.219s
Test 9: Test_9_EMA_Indicator_NVDA - PASS
  Response Time: 4.781s
Test 10: Test_10_RSI_Indicator_SPY - PASS
  Response Time: 4.076s
Test 11: Test_11_MACD_Indicator_AAPL - PASS
  Response Time: 6.038s
Test 12: Test_12_Multi_Ticker_Quote_AAPL_MSFT_GOOGL - PASS
  Response Time: 15.337s
Test 13: Test_13_Options_Quote_SPY_Call - PASS
  Response Time: 6.575s
Test 14: Test_14_OHLC_Custom_Date_Range_AAPL - PASS
  Response Time: 6.586s
Test 15: Test_15_OHLC_Specific_Date_TSLA - PASS
  Response Time: 5.973s
Test 16: Test_16_OHLC_Previous_Close_SPY - PASS
  Response Time: 7.969s

=== FULL CLI OUTPUT ===
Welcome to the GPT-5 powered Market Analysis Agent. Type 'exit' to quit.
📊 CLI session 'cli_session' initialized for conversation memory
> 
✅ Query processed successfully!
Agent Response:


 • Market status: Closed                                                        
 • After-hours: No                                                              
 • Early hours: No                                                              
 • Exchanges: Nasdaq closed, NYSE closed, OTC closed                            
 • Server time: 2025-10-05 19:36:44 (ET)                                        

Tools Used:                                                                     

 • get_market_status_and_date_time() - Provided real-time market status and     
   server datetime per RULE #4.                                                 

📊 Performance Metrics:
   ⏱️  Response Time: 5.300s
   🔢  Tokens Used: 10,808 (Input: 10,642, Output: 166)
   🤖  Model: gpt-5-nano

──────────────────────────────────────────────────

> 
✅ Query processed successfully!
Agent Response:


 • NVDA: 187.62                                                                 
 • Change: -1.27 (-0.67%)                                                       
 • High: 190.36                                                                 
 • Low: 185.38                                                                  
 • Open: 189.19                                                                 
 • Previous close: 188.89                                                       

Tools Used:                                                                     

 • get_stock_quote(ticker='NVDA') - Single ticker request, used Finnhub         
   real-time quote per RULE #1                                                  

📊 Performance Metrics:
   ⏱️  Response Time: 2.988s
   🔢  Tokens Used: 11,165 (Input: 11,057, Output: 108)
   🤖  Model: gpt-5-nano

──────────────────────────────────────────────────

> 
✅ Query processed successfully!
Agent Response:


 • SPY: 669.21                                                                  
    • Change: -0.01 (-0.00%)                                                    
    • High: 672.67                                                              
    • Low: 668.16                                                               
    • Open: 669.99                                                              
    • Prev close: 669.22                                                        
 • QQQ: 603.18                                                                  
    • Change: -2.55 (-0.42%)                                                    
    • High: 607.33                                                              
    • Low: 601.38                                                               
    • Open: 606.51                                                              
    • Prev close: 605.73                                                        
 • IWM: 245.83                                                                  
    • Change: 1.81 (0.74%)                                                      
    • High: 248.09                                                              
    • Low: 245.03                                                               
    • Open: 245.35                                                              
    • Prev close: 244.02                                                        

Tools Used:                                                                     

 • get_stock_quote(ticker='SPY') - Fallback single ticker quote after           
   multi-ticker data was unavailable                                            
 • get_stock_quote(ticker='QQQ') - Fallback single ticker quote after           
   multi-ticker data was unavailable                                            
 • get_stock_quote(ticker='IWM') - Fallback single ticker quote after           
   multi-ticker data was unavailable                                            

📊 Performance Metrics:
   ⏱️  Response Time: 9.260s
   🔢  Tokens Used: 14,975 (Input: 14,357, Output: 618)
   🤖  Model: gpt-5-nano

──────────────────────────────────────────────────

> 
✅ Query processed successfully!
Agent Response:


 • SPY closing price today: 669.21                                              

Tools Used:                                                                     

 • get_OHLC_bars_previous_close(ticker='SPY', adjusted=True) - Used as fallback 
   to provide last known close when market is closed.                           

📊 Performance Metrics:
   ⏱️  Response Time: 4.052s
   🔢  Tokens Used: 14,070 (Input: 13,795, Output: 275)
   🤖  Model: gpt-5-nano

──────────────────────────────────────────────────

> 
✅ Query processed successfully!
Agent Response:


 • SPY weekly price change: $1.86                                               
 • Percentage change: 0.28%                                                     

Note: Based on last two weekly closes: 663.68 vs 661.82.                        

Tools Used:                                                                     

 • get_OHLC_bars_custom_date_range(ticker='SPY', from_date='2025-09-01',        
   to_date='2025-10-05', timespan='week', multiplier=1, limit=20) - Retrieved   
   weekly bars to compute the latest weekly change.                             

📊 Performance Metrics:
   ⏱️  Response Time: 6.880s
   🔢  Tokens Used: 15,449 (Input: 14,766, Output: 683)
   🤖  Model: gpt-5-nano

──────────────────────────────────────────────────

> 
✅ Query processed successfully!
Agent Response:


 • Near-term resistance: ~672–673 (previous intraday high ~672.67)              
 • Immediate support: ~663–664 (latest weekly close 663.68; current price ~669) 
 • Secondary support: ~652–654 (earlier weekly lows/highs in range)             
 • 50-day SMA: ~648.03                                                          
 • 50-day EMA: ~648.04                                                          

Notes:                                                                          

 • Price levels are for SPY and based on recent weekly bars and 50-day moving   
   averages.                                                                    

Tools Used:                                                                     

 • get_OHLC_bars_custom_date_range(ticker='SPY', from_date='2025-09-01',        
   to_date='2025-10-05', timespan='week', multiplier=1, limit=20) - To establish
   recent support/resistance context from weekly bars                           
 • get_ta_sma(ticker='SPY', timespan='day', window=50, limit=5) - To obtain the 
   50-day simple moving average level                                           
 • get_ta_ema(ticker='SPY', timespan='day', window=50, limit=5) - To obtain the 
   50-day exponential moving average level                                      

📊 Performance Metrics:
   ⏱️  Response Time: 9.910s
   🔢  Tokens Used: 13,017 (Input: 12,111, Output: 906)
   🤖  Model: gpt-5-nano

──────────────────────────────────────────────────

> 
✅ Query processed successfully!
Agent Response:

Technical Analysis - SPY                                                        

 • 50-day SMA: 648.03                                                           
 • 50-day EMA: 648.04                                                           
 • RSI (14): 68.91 (near overbought threshold)                                  
 • MACD (12/26/9): MACD 6.05, Signal 5.99, Hist 0.06 (bullish crossover)        

Notes:                                                                          

 • Price momentum mixed but slightly bullish; RSI near 70 suggests potential    
   overbought risk.                                                             
 • Closer monitoring around 672–673 resistance and 663–664 support.             

Tools Used:                                                                     

 • get_ta_sma(ticker='SPY', timespan='day', window=50, limit=5) - Calculated    
   50-day SMA for trend context                                                 
 • get_ta_ema(ticker='SPY', timespan='day', window=50, limit=5) - Calculated    
   50-day EMA for trend context                                                 
 • get_ta_rsi(ticker='SPY', timespan='day', window=14, limit=5) - Measure       
   momentum strength                                                            
 • get_ta_macd(ticker='SPY', timespan='day', short_window=12, long_window=26,   
   signal_window=9, limit=5) - Identify trend strength and potential signals    

📊 Performance Metrics:
   ⏱️  Response Time: 8.326s
   🔢  Tokens Used: 11,976 (Input: 11,427, Output: 549)
   🤖  Model: gpt-5-nano

──────────────────────────────────────────────────

> 
✅ Query processed successfully!
Agent Response:


 • SPY 50-day SMA: 648.03                                                       

Tools Used:                                                                     

 • get_ta_sma(ticker='SPY', timespan='day', window=50, limit=10) - Provided     
   50-day simple moving average value.                                          

📊 Performance Metrics:
   ⏱️  Response Time: 17.219s
   🔢  Tokens Used: 19,572 (Input: 19,416, Output: 156)
   🤖  Model: gpt-5-nano

──────────────────────────────────────────────────

> 
✅ Query processed successfully!
Agent Response:


 • NVDA 20-day EMA: 180.54                                                      

Tools Used:                                                                     

 • get_ta_ema(ticker='NVDA', timespan='day', window=20, limit=5) - Provided     
   20-day EMA value.                                                            

📊 Performance Metrics:
   ⏱️  Response Time: 4.781s
   🔢  Tokens Used: 20,208 (Input: 20,054, Output: 154)
   🤖  Model: gpt-5-nano

──────────────────────────────────────────────────

> 
✅ Query processed successfully!
Agent Response:


 • SPY RSI (14): 68.91                                                          
 • Interpretation: Near overbought threshold (70)                               

Tools Used:                                                                     

 • get_ta_rsi(ticker='SPY', timespan='day', window=14, limit=5) - Provided      
   14-period RSI values and interpretation.                                     

📊 Performance Metrics:
   ⏱️  Response Time: 4.076s
   🔢  Tokens Used: 20,705 (Input: 20,603, Output: 102)
   🤖  Model: gpt-5-nano

──────────────────────────────────────────────────

> 
✅ Query processed successfully!
Agent Response:


 • AAPL MACD (12/26/9):                                                         
    • MACD: 7.42                                                                
    • Signal: 6.97                                                              
    • Histogram: 0.44                                                           

Tools Used:                                                                     

 • get_ta_macd(ticker='AAPL', timespan='day', short_window=12, long_window=26,  
   signal_window=9, limit=5) - Provided MACD values and signals.                

📊 Performance Metrics:
   ⏱️  Response Time: 6.038s
   🔢  Tokens Used: 21,509 (Input: 21,369, Output: 140)
   🤖  Model: gpt-5-nano

──────────────────────────────────────────────────

> 
✅ Query processed successfully!
Agent Response:


 • AAPL: 258.02                                                                 
    • Change: +0.89 (+0.35%)                                                    
    • High: 259.24                                                              
    • Low: 253.95                                                               
    • Open: 254.66                                                              
    • Prev close: 257.13                                                        
 • MSFT: 517.35                                                                 
    • Change: +1.61 (+0.31%)                                                    
    • High: 520.49                                                              
    • Low: 515.00                                                               
    • Open: 517.10                                                              
    • Prev close: 515.74                                                        
 • GOOGL: 245.35                                                                
    • Change: -0.34 (-0.14%)                                                    
    • High: 246.30                                                              
    • Low: 241.66                                                               
    • Open: 244.49                                                              
    • Prev close: 245.69                                                        

Tools Used:                                                                     

 • get_stock_quote_multi(tickers=['AAPL','MSFT','GOOGL'], market_type='stocks') 
   - Initial attempt for parallel quotes; data unavailable, fallback to         
   individual quotes per RULE #2 and market_status                              
 • get_stock_quote(ticker='AAPL') - Single ticker quote after fallback          
 • get_stock_quote(ticker='MSFT') - Single ticker quote after fallback          
 • get_stock_quote(ticker='GOOGL') - Single ticker quote after fallback         

📊 Performance Metrics:
   ⏱️  Response Time: 15.337s
   🔢  Tokens Used: 58,225 (Input: 57,780, Output: 445)
   🤖  Model: gpt-5-nano

──────────────────────────────────────────────────

> 
✅ Query processed successfully!
Agent Response:


 • SPY 12/25/2025 C6500/ Dec 25 2025 650 Call (O:SPY251219C00650000)            
    • Day range: Open 35.76, High 37.67, Low 34.60, Close 34.90                 
    • Implied volatility: 18.12%                                                
    • Delta: 0.68                                                               
    • Gamma: 0.0066                                                             
    • Theta: -0.165                                                             
    • Vega: 1.143                                                               
    • Open interest: 21,568                                                     
    • Break-even: (not provided)                                                

Tools Used:                                                                     

 • get_options_quote_single(underlying_asset='SPY',                             
   option_contract='O:SPY251219C00650000') - Provided contract details, Greeks, 
   IV, and OI per RULE #3                                                       

📊 Performance Metrics:
   ⏱️  Response Time: 6.575s
   🔢  Tokens Used: 24,709 (Input: 24,425, Output: 284)
   🤖  Model: gpt-5-nano

──────────────────────────────────────────────────

> 
✅ Query processed successfully!
Agent Response:


 • AAPL daily bars: 61 bars from 2024-01-01 to 2024-03-31 (OHLCV)               

If you want, I can export the full dataset as CSV or display all bars in a      
compact list.                                                                   

📊 Performance Metrics:
   ⏱️  Response Time: 6.586s
   🔢  Tokens Used: 30,265 (Input: 29,442, Output: 823)
   🤖  Model: gpt-5-nano

──────────────────────────────────────────────────

> 
✅ Query processed successfully!
Agent Response:


 • TSLA price on 2024-12-13 (adjusted): Close 436.23                            

Tools Used:                                                                     

 • get_OHLC_bars_specific_date(ticker='TSLA', date='2024-12-13', adjusted=True) 
   - Retrieved exact OHLC data for the specified date.                          

📊 Performance Metrics:
   ⏱️  Response Time: 5.973s
   🔢  Tokens Used: 34,264 (Input: 34,092, Output: 172)
   🤖  Model: gpt-5-nano

──────────────────────────────────────────────────

> 
✅ Query processed successfully!
Agent Response:


 • SPY previous trading day close: 669.21                                       

Tools Used:                                                                     

 • get_OHLC_bars_previous_close(ticker='SPY', adjusted=True) - Retrieved last   
   completed close for SPY.                                                     

📊 Performance Metrics:
   ⏱️  Response Time: 7.969s
   🔢  Tokens Used: 34,983 (Input: 34,712, Output: 271)
   🤖  Model: gpt-5-nano

──────────────────────────────────────────────────

> Goodbye!
📊 CLI session cleaned up

=== END PERSISTENT SESSION TEST REPORT ===
